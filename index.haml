!!! 5
%html
    %head
        %title
            Mage Studio

        / basic imports, we don't need angular or react, yet
        %script
            window.$ = window.jQuery = require('./app/lib/jquery.min');
        %script
            window.signals = require('./app/lib/signals.min');
        /%script{:type=>"text/javascript", :src=>"app/lib/signals.min.js"}
        %script{:type=>"text/javascript", :src=>"app/bower_components/sweetalert/dist/sweetalert.min.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/bootstrap.min.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/classy.min.js"}
        /%script{:type=>"text/javascript", :src=>"app/lib/json2.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/util.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/HashMap.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/colorpicker.js"}

        / script editor imports
        %script{:type=>"text/javascript", :src=>"app/lib/codemirror.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/keypress.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/jshint.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/jBox.min.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/coffee-script.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/addons/javascript.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/addons/coffeescript.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/addons/active-line.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/addons/matchbrackets.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/addons/closebrackets.js"}

        / actual three.js import
        %script{:type=>"text/javascript", :src=>"app/lib/three.min.js"}

        / three js related imports
        %script{:type=>"text/javascript", :src=>"app/lib/Projector.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/threex.domevents.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/OrbitControls.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/TransformControls.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/stats.min.js"}
        %script{:type=>"text/javascript", :src=>"app/lib/SceneExporter.js"}

        / adding style
        %link{:rel=>'stylesheet', :type=>'text/css', :href=>'http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300'}
        %link{:rel=>'stlyesheet', :type=>'text/css', :href=>"app/bower_components/sweetalert/dist/sweetalert.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"app/bower_components/sweetalert/dist/sweetalert.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/jBox.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/TooltipDark.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/console_themes/monokai.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/codemirror.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/themes/monokai.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/bootstrap.dark.min.css"}
        %link{:rel=>"stylesheet", :href=>"css/font-awesome/css/font-awesome.min.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/colorpicker.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/app.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/colors.css"}

        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/topcoat-desktop-dark.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/main.css"}

        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/left_sidebar.css"}
        %link{:rel=>"stylesheet", :type=>"text/css", :href=>"css/right_sidebar.css"}


        %script{:type=>"text/javascript", :src=>"app/App.main.js"}
    %body
        / navbar
        .navbar-xs
            .navbar-primary
                %nav#nav.navbar.navbar-inverse
                    .container-fluid
                        / Brand and toggle get grouped for better mobile display
                        .navbar-header
                            %button.navbar-toggle.collapsed{:type=>"button", "data-toggle"=>"collapse", "data-target"=>"#bs-example-navbar-collapse-1"}
                                %span.sr-only
                                    Toggle navigation
                                %span.icon-bar
                                %span.icon-bar
                                %span.icon-bar
                            %a.navbar-brand{:href=>"#"}
                                Mage
                        / Collect the nav links, forms, and other content for toggling
                        #bs-example-navbar-collapse-1.collapse.navbar-collapse
                            %ul.nav.navbar-nav
                                %li.dropdown
                                    %a.dropdown-toggle{:href=>"#", "data-toggle"=>"dropdown", :role=>"button", "aria-expanded"=>"false"}
                                        File
                                        %span.caret
                                    %ul.dropdown-menu{:role=>"menu"}
                                        %li
                                            %a{:href=>"javascript:app.new();"}
                                                New
                                        %li
                                            %a{:href=>"javascript:app.storage.save();"}
                                                Save
                                        %li
                                            %a{:href=>"#"}
                                                Load
                                        %li.divider
                                        %li
                                            %a{:href=>"#"}
                                                Load Recent
                                        %li.divider
                                        %li
                                            %a{:href=>"#"}
                                                Close
                                %li.dropdown
                                    %a.dropdown-toggle{:href=>"#", "data-toggle"=>"dropdown", :role=>"button", "aria-expanded"=>"false"}
                                        Add
                                        %span.caret
                                    %ul.dropdown-menu{:role=>"menu"}
                                        %li
                                            %a{:href=>"#", "data-toggle"=>"modal", "data-target"=>"#addMeshModal"}
                                                Mesh
                                        %li
                                            %a{:href=>"#", "data-toggle"=>"modal", "data-target"=>"#addModelModal"}
                                                Model
                                        %li
                                            %a{:href=>"#", "data-toggle"=>"modal", "data-target"=>"#addCameraModal"}
                                                Camera
                                        %li.divider
                                        %li
                                            %a{:href=>"#", "data-toggle"=>"modal", "data-target"=>"#addLightModal"}
                                                Lights
                                        %li.divider
                                        %li
                                            %a{:href=>"#", "data-toggle"=>"modal", "data-target"=>"#addSoundModal"}
                                                Sound
                                %li.dropdown
                                    %a.dropdown-toggle{:href=>"#", "data-toggle"=>"dropdown", :role=>"button", "aria-expanded"=>"false"}
                                        View
                                        %span.caret
                                    %ul.dropdown-menu{:role=>"menu"}
                                        %li
                                            %a{:href=>"#", "data-toggle"=>"modal", "data-target"=>"#sceneSelectorModal"}
                                                Scenes
                                        %li
                                            %a{:href=>"javascript:app.openEditor();"}
                                                Script Editor
                                        %li.divider
                                        %li
                                            %a{:href=>"#"}
                                                Settings
                                %li.dropdown
                                    %a.dropdown-toggle{:href=>"#", "data-toggle"=>"dropdown", :role=>"button", "aria-expanded"=>"false"}
                                        Build
                                        %span.caret
                                    %ul.dropdown-menu{:role=>"menu"}
                                        %li
                                            %a{:href=>"javascript:app.exporter.wage();"}
                                                Wage Build
                                        %li
                                            %a{:href=>"#"}
                                                Mobile Build
                                        %li
                                            %a{:href=>"#"}
                                                Electron Build
                            %ul.nav.navbar-nav
                                %li#titlesNavbar
                                    %span#projectTitle
                                    -
                                    %span#sceneTitle
                            %ul.nav.navbar-nav.navbar-right
                                %li.dropdown
                                    %a.dropdown-toggle.fa.fa-question{:href=>"#", "data-toggle"=>"dropdown", :role=>"button", "aria-expanded"=>"false"}
                                        Help
                                        %span.caret
                                    %ul.dropdown-menu{:role=>"menu"}
                                        %li
                                            %a{:href=>"#"}
                                                Version
                                        %li
                                            %a{:href=>"#"}
                                                Powered by
                                        %li
                                            %a{:href=>"#"}
                                                Wiki
                                        %li.divider
                                        %li
                                            %a{:href=>"#"}
                                                About
        / main container
        #scriptcontainer
            #projectContainer
                .context-menu-container
                    //%a.dropdown-toggle{:href=>"#", "data-toggle"=>"dropdown", :role=>"button", "aria-expanded"=>"false"}
                    %ul.context-menu
                        %li
                            %a{:href=>"#"}
                                NEW FOLDER
                        %li
                            %a{:href=>"#"}
                                NEW FILE
                        %li
                            %a{:href=>"#"}
                                DELETE
                        %li
                            %a{:href=>"#"}
                                RENAME
                /%button#newFolder.topcoat-button--large--cta
                /    new folder
                /%button#newScript.topcoat-button--large--cta
                /    new script
                %i#rootFolder.fa.fa-book{'data-path'=>''}
                    %span
                %ul#project
                    //%li.folder{'data-path'=>'/scripts'}
                    //    %i.fa.fa-folder-o
                    //        scripts
                    //    %ul.subfolder
                    //        %li.file.js
                    //            %i.fa.fa-file-code-o
                    //                camera.js
                    //        %li.folder
                    //            %i.fa.fa-folder-o
                    //                cube
                    //            %ul.subfolder
                    //                %li.file.js
                    //                    %i.fa.fa-file-code-o
                    //                        mybox.js
                    //%li.file.js
                    //    %i.fa.fa-file-code-o
                    //        main.js
                    //%li.file.js
                    //    %i.fa.fa-file-code-o
                    //        config.js
            #codeContainer
                #tabs
                    %ul
                        //%li#tab_0.tab.active
                        //    %i.fa.fa-remove.close
                        //    %span
                        //        main.js
                        //%li#add_tab.tab
                        //    +
                / parte superiore dell'editor
                #upper_console
                    #closeEditor.toggle.fa.fa-close
                        %span
                            Close

                #main_container.monokai
                    %h1.empty-message
                        select a file on the left
                    #editor_0.editor.visible
                    %ul#messages
                    %i#errorAlert.fa.fa-exclamation-circle
                    #coffee_compiler.invisible
                        COMPILE
        / main container
        #maincontainer.container-fluid
            #innercontainer.row
                #left-column.column
                    %h6.title
                        Scene Settings
                    #accordion.panel-group{"role"=>"tablist", "aria-multiselectable"=>"true"}
                        / first expandable
                        .panel.panel-default
                            .panel-body{:style=>"padding:0;"}
                                .row.panel-content
                                    .col-md-4.panel-content-title
                                        Enabled
                                    .col-md-8
                                        %label.topcoat-switch
                                            %input#fogToggle.topcoat-switch__input{:type=>"checkbox", "data-flag"=>"fog"}
                                            .topcoat-switch__toggle
                                .row.panel-content
                                    .col-md-4.panel-content-title
                                        Color
                                    .col-md-8
                                        %input#fogColor.color{:style=>"width: 80px; margin-top: 4px;", "data-toggle"=>"fog"}
                                .row.panel-content
                                    .col-md-4.panel-content-title
                                        Density
                                    .col-md-8
                                        %input#fogDensity.topcoat-range{:style=>"width: 80px; margin-top: 13px;", :type=>"range", "data-toggle"=>"fog", :min=>"0", :max=>"1", :step=>"0.1", :value=>"0.5"}
                        / shadow expandable
                        .panel.panel-default{:style=>"margin-top: -2px !important;"}
                            .panel-body{:style=>"padding:0;padding-bottom: 10px;"}
                                .row.panel-content
                                    .col-md-4.panel-content-title
                                        Enabled
                                    .col-md-8
                                        %label.topcoat-switch
                                            %input#shadowToggle.topcoat-switch__input{:type=>"checkbox", "data-flag"=>"shadow"}
                                            .topcoat-switch__toggle
                                %h6.panel-title-medium{:style=>"margin-left: 27px;"}
                                    type:
                                .row.panel-content
                                    .dropdown
                                        #changeMaterial.topcoat-button--large--cta.dropdown-toggle{:type=>"button", "data-toggle"=>"dropdown", "aria-expanded"=>"true", :style=>"margin-left: 13px;height: 20px;line-height: 20px;"}
                                            Change Shadow Type
                                            %span.caret
                                        %ul.dropdown-menu{:role=>"menu", "aria-labelledby"=>"changeMaterial"}
                                            %li{:role=>"presentation"}
                                                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"javascript:app.sm.changeShadow('BasicShadowMap');"}
                                                    BasicShadowMap
                                            %li{:role=>"presentation"}
                                                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"javascript:app.sm.changeShadow('PCFShadowMap');"}
                                                    PCFShadowMap
                                            %li{:role=>"presentation"}
                                                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"javascript:app.sm.changeShadow('PCFSoftShadowMap');"}
                                                    PCFSoftShadowMap
                        .row
                            .col-md-12
                                %button#updateShadows.topcoat-button--large--cta{:style=>"width:100%;"}
                                    Update Scene
                        / here second expandable
                        .panel.panel-default.panel-column
                            .panel-body{:style=>"padding:0;"}
                                .panel-content{:style=>"padding: 0;"}
                                    .topcoat-button-bar{:style=>"margin-left: auto; margin-right: auto;"}
                                        .topcoat-button-bar__item
                                            %button#controlsTranslate.topcoat-button-bar__button--large.settingButton
                                                Translate
                                        .topcoat-button-bar__item
                                            %button#controlsRotate.topcoat-button-bar__button--large.settingButton
                                                Rotate
                                        .topcoat-button-bar__item
                                            %button#controlsScale.topcoat-button-bar__button--large.settingButton
                                                Scale
                                        .topcoat-button-bar__item
                                            %button#controlsSpace.topcoat-button-bar__button--large.settingButton
                                                Space
                                .row.panel-content
                                    #controlsMode.col-md-12.panel-content-title
                                        Control Mode: Translate
                                .row.panel-content
                                    #controlsSpaceValue.col-md-12.panel-content-title
                                        Control Space: Local
                        / third scene hierarchy
                        .panel.panel-default.scene-panel
                            .panel-heading
                                .panel-title
                                    %i.fa.fa-cubes.text-blue
                                    %span Meshes
                            .panel-body.container-fluid.meshes
                                .row
                                    .col-md-4
                                        %span.total.total-label
                                            total
                                        %span.total.total-count
                                            0
                                    .col-md-8.container-fluid
                                        .row
                                            %span.meshes-info
                                                Vertices:
                                            %span#sceneVertices.meshes-info.meshes-count
                                                0
                                        .row
                                            %span.meshes-info
                                                Faces:
                                            %span#sceneFaces.meshes-info.meshes-count
                                                0
                                .row
                                    .col-md-12
                                        %ul#sceneHierarchy.hierarchy.empty
                                            %li.empty-hierarchy-message
                                                no elements
                        / fourth lights
                        .panel.panel-default.scene-panel
                            .panel-heading
                                .panel-title
                                    %i.fa.fa-lightbulb-o.text-yellow
                                    %span Lights
                            .panel-body.container-fluid.lights
                                .row
                                    .col-md-4
                                        %span.total.total-label
                                            total
                                        %span#lightsCount.total.total-count
                                            0
                                    .col-md-8
                                        %ul#lightHierarchy.hierarchy.empty
                                            %li.empty-hierarchy-message
                                                no elements
                        / fifth sounds
                        .panel.panel-default.scene-panel
                            .panel-heading
                                .panel-title
                                    %i.fa.fa-bell-o.text-green
                                    %span Sounds
                            .panel-body.container-fluid.sounds
                                .row
                                    .col-md-4
                                        %span.total.total-label
                                            total
                                        %span#soundsCount.total.total-count
                                            0
                                    .col-md-8
                                        %ul#soundsHierarchy.hierarchy.empty
                                            %li.empty-hierarchy-message
                                                no elements
                        %h1
                            .mage-player.topcoat-button-bar{:style=>"margin-right:auto; margin-left:auto; "}
                                .topcoat-button-bar__item
                                    %button.play_button.topcoat-button-bar__button--large{:onclick=>"javascript:app.player.play();"}
                                        %i.fa.fa-play
                                        %span
                                            PLAY
                                .topcoat-button-bar__item
                                    %button.pause_button.topcoat-button-bar__button--large{:onclick=>"javascript:app.player.pause();"}
                                        %i.fa.fa-pause
                                        %span
                                            PAUSE
                        / #playSceneContainer.row
                        /    %img{:src=>"img/play.png"}
                #center.column
                    #scenecontainer
                #right-column.column
                    %h3#nomeshselected
                        No mesh selected
                    #rightContainer.panel-group{:role=>"tablist", "aria-multiselectable"=>"true"}
            .row
                #footer.col-md-12
                    .row.panel-content
                        .col-md-2
                            %span.footer-text
                                Autosave
                            %label.topcoat-switch{:style=>"margin-top:3px;"}
                                %input#autosaveToggle.topcoat-switch__input{:type=>"checkbox", "data-flag"=>"autosave"}
                                .topcoat-switch__toggle
                        .col-md-2#status
                            %i.fa.fa-close
                            %span.footer-text
                                Not Saved.
                        .col-md-2
                        .col-md-2
                        .col-md-4
                            .progress{:style=>"margin-top:5px;"}
                                .progress-bar#progressBar{:role=>"progressbar", "aria-valuenow"=>"60", "aria-valuemin"=>"0", "aria-valuemax"=>"100", :style=>"width: 0%;"}
                                    0%
        / modals
        / scene selector modal
        #sceneSelectorModal.wagemodal.modal.fade.bs-example-modal-sm{:tabindex=>"-1", :role=>"dialog", "aria-labelledby"=>"myModalLabel", "aria-hidden"=>"true"}
            .modal-dialog{:style=>"z-index:99999;"}
                .modal-content
                    .modal-header
                        %h4#addMeshModalTitle.modal-title
                            Scene Selection
                    .modal-body
                        %ul#sceneSelectorList.list-group
                    .modal-footer
                        %button.topcoat-button--large--cta{:type=>"button", "data-dismiss"=>"modal"}
                            Close
        / addMeshModal
        #addMeshModal.wagemodal.modal.fade.bs-example-modal-sm{:tabindex=>"-1", :role=>"dialog", "aria-labelledby"=>"myModalLabel", "aria-hidden"=>"true"}
            .modal-dialog{:style=>"z-index:99999;"}
                .modal-content
                    .modal-header
                        %h4#addMeshModalTitle.modal-title
                            Add > Mesh
                    .modal-body
                        %ul.list-group
                            %li.list-group-item{:onclick=>"app.mm.addMesh('cube');$('#addMeshModal').modal('hide');"}
                                Cube
                            %li.list-group-item{:onclick=>"app.mm.addMesh('sphere');$('#addMeshModal').modal('hide');"}
                                Sphere
                            %li.list-group-item{:onclick=>"app.mm.addMesh('cylinder');$('#addMeshModal').modal('hide');"}
                                Cylinder
                            %li.list-group-item{:onclick=>"app.mm.addMesh('plane');$('#addMeshModal').modal('hide');"}
                                Plane
                            %li.list-group-item{:onclick=>"app.mm.addMesh('dodecahedron');$('#addMeshModal').modal('hide');"}
                                Dodecahedron
                            %li.list-group-item{:onclick=>"app.mm.addMesh('tube');$('#addMeshModal').modal('hide');"}
                                Tube
                            %li.list-group-item{:onclick=>"app.mm.addMesh('thorus');$('#addMeshModal').modal('hide');"}
                                Thorus
                    .modal-footer
                        %button.topcoat-button--large--cta{:type=>"button", "data-dismiss"=>"modal"}
                            Close
        / add model modal
        #addModelModal.wagemodal.modal.fade.bs-example-modal-sm{:tabindex=>"-1", :role=>"dialog", "aria-labelledby"=>"myModalLabel", "aria-hidden"=>"true"}
            .modal-dialog{:style=>"z-index:99999;"}
                .modal-content
                    .modal-header
                        %h4#addMeshModalTitle.modal-title
                            Add > Model
                    .modal-body
                        %ul.list-group
                            %li.list-group-item{:onclick=>"app.modm.addModel('json'); $('#addModelModal').modal('hide');"}
                                Load JSON
                    .modal-footer
                        %button.topcoat-button--large--cta{:type=>"button", "data-dismiss"=>"modal"}
                            Close
        / add camera modal
        #addCameraModal.wagemodal.modal.fade.bs-example-modal-sm{:tabindex=>"-1", :role=>"dialog", "aria-labelledby"=>"myModalLabel", "aria-hidden"=>"true"}
            .modal-dialog{:style=>"z-index:99999;"}
                .modal-content
                    .modal-header
                        %h4#addCamerahModalTitle.modal-title
                            Add > Camera
                    .modal-body
                        %ul.list-group
                            %li.list-group-item{:onclick=>"app.modm.addCamera('perspective'); $('#addCameraModal').modal('hide');"}
                                Perspective Camera
                    .modal-footer
                        %button.topcoat-button--large--cta{:type=>"button", "data-dismiss"=>"modal"}
                            Close
        / add light modal
        #addLightModal.wagemodal.modal.fade.bs-example-modal-sm{:tabindex=>"-1", :role=>"dialog", "aria-labelledby"=>"myModalLabel", "aria-hidden"=>"true"}
            .modal-dialog{:style=>"z-index:99999;"}
                .modal-content
                    .modal-header
                        %h4#addMeshModalTitle.modal-title
                            Add > Light
                    .modal-body
                        %ul.list-group
                            %li.list-group-item{:onclick=>"app.lm.addLight('ambientLight');$('#addLightModal').modal('hide');"}
                                Ambient Light
                            %li.list-group-item{:onclick=>"app.lm.addLight('pointLight');$('#addLightModal').modal('hide');"}
                                Point Light
                            %li.list-group-item{:onclick=>"app.lm.addLight('directionalLight');$('#addLightModal').modal('hide');"}
                                Directional Light
                    .modal-footer
                        %button.topcoat-button--large--cta{:type=>"button", "data-dismiss"=>"modal"}
                            Close
        / add sound modal
        #addSoundModal.wagemodal.modal.fade.bs-example-modal-sm{:tabindex=>"-1", :role=>"dialog", "aria-labelledby"=>"myModalLabel", "aria-hidden"=>"true"}
            .modal-dialog{:style=>"z-index:99999;"}
                .modal-content
                    .modal-header
                        %h4#addMeshModalTitle.modal-title
                            Add > Model
                    .modal-body
                        %ul.list-group
                            %li.list-group-item{:onclick=>"app.modm.addModel('json');"}
                                Load JSON
                    .modal-footer
                        %button.topcoat-button--large--cta{:type=>"button", "data-dismiss"=>"modal"}
                            Close
